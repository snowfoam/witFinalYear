(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-512f1d8f"],{"036b":function(e,t,n){},ad65:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Form",{ref:"formInline",attrs:{model:e.formInline,inline:""}},[n("FormItem",{attrs:{prop:"Subject Type"}},[n("Select",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"subject type"},model:{value:e.formInline.subjectId,callback:function(t){e.$set(e.formInline,"subjectId",t)},expression:"formInline.subjectId"}},e._l(e.subjects,(function(t){return n("Option",{key:t._id,attrs:{value:t._id}},[e._v(e._s(t.subjectName))])})),1)],1),n("FormItem",{attrs:{prop:"Question Type"}},[n("Select",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"question type"},model:{value:e.formInline.type,callback:function(t){e.$set(e.formInline,"type",t)},expression:"formInline.type"}},[n("Option",{attrs:{value:"single"}},[e._v("single")]),n("Option",{attrs:{value:"multiple"}},[e._v("multiple")]),n("Option",{attrs:{value:"trueOrFalse"}},[e._v("trueOrFalse")])],1)],1),n("FormItem",[n("Button",{staticStyle:{"margin-right":"8px"},on:{click:e.query}},[e._v("search")]),n("Button",{staticStyle:{"margin-right":"8px"},attrs:{icon:"ios-cloud-upload-outline"},on:{click:e.openUploadModal}},[e._v("Create(Excel)")]),n("Button",{attrs:{type:"primary",icon:"ios-add"},on:{click:e.openCreateModal}},[e._v("Create")])],1)],1),n("Table",{attrs:{border:"",columns:e.columns,data:e.questions,height:"500"},scopedSlots:e._u([{key:"no",fn:function(t){t.row;var r=t.index;return[n("span",[e._v(e._s(r+1))])]}},{key:"subject",fn:function(t){var r=t.row;return[n("span",[e._v(e._s(e.subjectObject[r.subjectId]))])]}},{key:"action",fn:function(t){var r=t.row,s=t.index;return[n("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",ghost:"",size:"small"},on:{click:function(t){return e.openUpdateModal(r)}}},[e._v("edit")]),n("Button",{attrs:{type:"error",size:"small",ghost:""},on:{click:function(t){return e.openDeleteModal(r,s+1)}}},[e._v("delete")])]}}])}),n("Modal",{attrs:{title:"question - "+e.modalType,loading:e.loading},on:{"on-ok":e.handleOnOk},model:{value:e.showCreateOrUpdateModal,callback:function(t){e.showCreateOrUpdateModal=t},expression:"showCreateOrUpdateModal"}},[n("Form",{attrs:{model:e.formItem,"label-width":140}},[n("FormItem",{attrs:{label:"question desc"}},[n("Input",{attrs:{type:"textarea"},model:{value:e.formItem.article,callback:function(t){e.$set(e.formItem,"article",t)},expression:"formItem.article"}})],1),n("FormItem",{attrs:{label:"Subject Type"}},[n("Select",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"subject type"},model:{value:e.formItem.subjectId,callback:function(t){e.$set(e.formItem,"subjectId",t)},expression:"formItem.subjectId"}},e._l(e.subjects,(function(t){return n("Option",{key:t._id,attrs:{value:t._id}},[e._v(e._s(t.subjectName))])})),1)],1),n("FormItem",{attrs:{label:"Question Type"}},[n("Select",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"question type"},on:{"on-change":e.onChange},model:{value:e.formItem.type,callback:function(t){e.$set(e.formItem,"type",t)},expression:"formItem.type"}},[n("Option",{attrs:{value:"single"}},[e._v("single")]),n("Option",{attrs:{value:"multiple"}},[e._v("multiple")]),n("Option",{attrs:{value:"trueOrFalse"}},[e._v("trueOrFalse")])],1)],1),n("FormItem",{attrs:{label:"Options"}},[e._l(e.formItem.options,(function(t){return n("Tag",{key:""+t,attrs:{name:""+t,closable:"trueOrFalse"!==e.formItem.type},on:{"on-close":e.handleClose}},[e._v(e._s(t))])})),e.inputVisible?n("Input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{"on-blur":e.handleInputConfirm},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):n("Button",{attrs:{icon:"ios-add",type:"dashed",size:"small",disabled:"trueOrFalse"===e.formItem.type},on:{click:e.showInput}})],2),n("FormItem",{attrs:{label:"Answer"}},[n("Select",{staticStyle:{width:"200px"},attrs:{clearable:"",multiple:"multiple"===e.formItem.type,placeholder:"anwser"},model:{value:e.formItem.answer,callback:function(t){e.$set(e.formItem,"answer",t)},expression:"formItem.answer"}},e._l(e.formItem.options,(function(t){return n("Option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1)],1)],1)],1),n("Modal",{attrs:{width:"460"},model:{value:e.showUploadModal,callback:function(t){e.showUploadModal=t},expression:"showUploadModal"}},[n("p",{staticStyle:{"text-align":"center"},attrs:{slot:"header"},slot:"header"},[n("Icon",{attrs:{type:"ios-information-circle"}}),n("span",[e._v("question - upload excel")])],1),n("Form",{attrs:{model:e.formItem,"label-width":140}},[n("FormItem",{attrs:{label:"Subject Type"}},[n("Select",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"subject type"},model:{value:e.formItem.subjectId,callback:function(t){e.$set(e.formItem,"subjectId",t)},expression:"formItem.subjectId"}},e._l(e.subjects,(function(t){return n("Option",{key:t._id,attrs:{value:t._id}},[e._v(e._s(t.subjectName))])})),1)],1),n("FormItem",{attrs:{label:"Question Type"}},[n("Upload",{attrs:{"before-upload":e.handleUpload,action:"/teacher/question/createByUpload"}},[n("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[e._v("Select the file to upload")])],1),null!==e.file?n("div",[e._v("\n          Upload file: "+e._s(e.file.name)+"\n          "),n("Button",{attrs:{type:"text",loading:e.loading},on:{click:e.upload}},[e._v(e._s(e.loading?"Uploading":"Click to upload"))])],1):e._e()],1)],1),n("div",{attrs:{slot:"footer"},slot:"footer"})],1),n("Modal",{attrs:{width:"360"},model:{value:e.showDeleteModal,callback:function(t){e.showDeleteModal=t},expression:"showDeleteModal"}},[n("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[n("Icon",{attrs:{type:"ios-information-circle"}}),n("span",[e._v("question - delete")])],1),n("div",{staticStyle:{"text-align":"center"}},[n("p",[e._v("Will you delete question: "+e._s(e.questionNo)+"?")])]),n("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"error",loading:e.loading},on:{click:e.remove}},[e._v("delete")])],1)])],1)},s=[],o=(n("8e6e"),n("456d"),n("ac6a"),n("96cf"),n("1da1")),a=n("ade3"),i=n("2f62"),l=n("2ef0");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={name:"questions",data:function(){return{formInline:{subjectId:"",type:""},subjects:[],questionNo:"",subjectObject:{},questions:[],inputVisible:!1,inputValue:"",modalType:"create",showCreateOrUpdateModal:!1,showDeleteModal:!1,showUploadModal:!1,file:null,loading:!1,formItem:{type:"",article:"",options:[],answer:[],subjectId:""},columns:[{title:"No",slot:"no",width:70},{title:"Desc",key:"article"},{title:"QuestionType",key:"type"},{title:"SubjectType",slot:"subject",align:"center"},{title:"Action",slot:"action",width:150,align:"center"}]}},methods:u(u({},Object(i["b"])(["getSubjects","getQuestions","createQuestion","updateQuestion","uploadExcel","removeQuestion"])),{},{openCreateModal:function(){this.modalType="create",this.showCreateOrUpdateModal=!0,this.formItem={type:"",article:"",options:[],answer:[],subjectId:""}},openUpdateModal:function(e){this.modalType="update",this.showCreateOrUpdateModal=!0;var t=Object(l["cloneDeep"])(e);Array.isArray(t.options)&&(t.options=t.options.map((function(e){if("boolean"===typeof e)return String(e)}))),"boolean"===typeof t.answer&&(t.answer=String(t.answer)),this.formItem=t},openUploadModal:function(){this.showUploadModal=!0,this.formItem={type:"",article:"",options:[],answer:[],subjectId:""}},openDeleteModal:function(e,t){this.formItem=e,this.questionNo=t,this.showDeleteModal=!0},onChange:function(e){this.formItem.answer="multiple"===e?[]:void 0,"trueOrFalse"===e&&(this.formItem.options=["true","false"])},showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick((function(t){e.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(){var e=this.inputValue;e&&this.formItem.options.push(e),this.inputVisible=!1,this.inputValue=""},handleClose:function(e,t){var n=this.formItem.options.indexOf(t);this.formItem.options.splice(n,1)},querySubjects:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getSubjects();case 2:t=e.sent,n=t.list,this.subjects=n,n.forEach((function(e){r.subjectObject[e._id]=e.subjectName}));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),query:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getQuestions(this.formInline);case 2:t=e.sent,n=t.list,this.questions=n;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleOnOk:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.loading=!0,"create"!==this.modalType){e.next=7;break}return e.next=4,this.createQuestion(this.formItem);case 4:t=e.sent,e.next=11;break;case 7:return this.formItem.questionId=this.formItem._id,e.next=10,this.updateQuestion(this.formItem);case 10:t=e.sent;case 11:if(!t||!t.success){e.next=17;break}return e.next=14,this.query();case 14:this.$Message.success("".concat(this.modalType," success")),e.next=18;break;case 17:this.$Message.error("".concat(this.modalType," fail"));case 18:this.loading=!1;case 19:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleUpload:function(e){return this.file=e,!1},upload:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.formItem.subjectId&&this.file){e.next=3;break}return this.$Message.error("please select subject type"),e.abrupt("return");case 3:return this.loading=!0,t=new FormData,t.append("excel",this.file),t.append("subjectId",this.formItem.subjectId),e.next=9,this.uploadExcel(t);case 9:if(n=e.sent,r=n.success,!r){e.next=17;break}return e.next=14,this.query();case 14:this.$Message.success("upload success"),e.next=18;break;case 17:this.$Message.error("upload fail");case 18:this.loading=!1,this.showUploadModal=!1,this.file=null;case 21:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),remove:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.removeQuestion({questionId:this.formItem._id});case 3:if(t=e.sent,n=t.success,!n){e.next=11;break}return e.next=8,this.query();case 8:this.$Message.success("remove success"),e.next=12;break;case 11:this.$Message.error("remove fail");case 12:this.loading=!1,this.showDeleteModal=!1;case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}),mounted:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.querySubjects();case 2:return e.next=4,this.query();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},d=p,m=(n("ec09"),n("2877")),f=Object(m["a"])(d,r,s,!1,null,"e2d21234",null);t["default"]=f.exports},ec09:function(e,t,n){"use strict";var r=n("036b"),s=n.n(r);s.a}}]);